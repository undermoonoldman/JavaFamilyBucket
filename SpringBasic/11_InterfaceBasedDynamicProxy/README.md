##  **动态代理技术:可以在不修改源码的基础上对方法进行增强,添加新的功能**

## *动态代理分类: 1.基于接口的 2.基于子类的*



## 基于接口的动态代理:涉及的类Proxy,类提供者为JDK官方

+ #### 前提:存在有一个被代理接口与被代理实现类

+ #### 我们需要做的只是使用JDK官方的Proxy类的newProxyInstance方法创建一个代理类对象并实现函数参数之一的invoke方法就行了

+ #### 使用步骤:

  1. ###### 调用Proxy类的newProxyInstance方法创建一个代理类对象

     ###### 需要参数有:被代理实现类的加载器(固定写法),被代理实现类的所有接口(固定写法),匿名内部类InvocationHandler(需要我们自己来进行编写)

  2. ###### 编写匿名内部类InvocationHandler,其实主要是编写invoke方法

     ###### invoke方法的参数:proxy(代理类对象的引用),method(当前被代理对象执行的方法,可以根据方法名对不同的方法添加不同的逻辑,完成增强逻辑后调用method的invoke方法执行被代理对象本来的逻辑),args(当前执行方法所需的参数)

### 存在缺陷:基于接口的动态代理产生的代理类对象是基于被代理接口实现类的,也就是说,代理类对象必须实现至少一个接口才行,如果直接使用被代理接口则无法正常工作。

