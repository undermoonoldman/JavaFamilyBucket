# *手写简易IOC容器*

## 问什么要有spirng,spring到底解决了什么痛点?

### 1. 先看看没有spring时的开发：

#### A. 以web开发为例子,通常采用mvc模式,controller调用service,service调用dao,就这样高层调用底层功能的情形需要高层持有一个底层的对象,最原始的方法就是在高层的业务逻辑开始之前先创建一个底层对象(通常是new出来),当高层对象依赖多个底层对象时就会在代码中产生过多的new,使代码看上去十分混乱。

#### B. 如何解决这一堆的new,一个解决方案是使用对象工厂,这样高层对象就从一堆new中解脱出来,但是新产生的问题就是,高层对象又与生产特定对象的工厂耦合起来了。还有一个问题就是很多底层对象会被多个高层对象重复调用,如果每次调用都用工厂创建一次,调用完毕就销毁,这样来来回回产生了很多不必要的开销。

#### C. 依赖对象的创建于销毁并不是我们业务所关系的。总结以上,我们需要一个工具能代我们管理业务所依赖的所有对象,在业务需要时能提供该对象的引用,同时以最小开销维持所依赖对象的创建数量,这样就引出了容器的概念。

### 2. 容器的作用：

#### A. 按照指令生成特定对象:最好是从外部配置文件读入

#### B. 管理对象:持有对象的引用,还能避免不必要的开销

#### C. 在需要的时候能方法的提供对象:调用方式要方便,不用全类名的麻烦方式,用类似小名的方式就可轻松调用

### 3.简单实现容器的功能

#### A. 存储对象的容器用 Map<String, Object>: 存储形式为对象的"小名"+对象本身

#### B. 用于引入需要创建对象的外部配置文件 properties: 键keys 为对象的小名(小名要唯一不能重复),值 values 为对象的全类名(只有知道全类名才能用反射创建出所需的对象)

#### C. 建立BeanFactory类即对象工厂类,该类在被加载时就完成了读取配置文件,按照配置文件中的配置创建对象,并把对象按照小名为索引添加到内置的Map容器中去。

![正事配图](https://github.com/NoMoreThanAWord/SpringFamilyBucket/raw/master/Resource/IMG/001.jpg)



