# ***Linux服务器新手贴士***

1. ## **Linux** 严格区分大小写

   ### Linux 是严格区分大小写的，这一点和 Windows 不一样，所以操作时要注意区分大小写的不同，包括文件名和目录名、命令、命令选项、配置文件设置选项等

2. ## **Linux** 一切皆文件

   ### Linux 中所有内容都是以文件的形式保存和管理的，硬件设备也是文件，这和 Windows 完全不同， Windows 是通过设备管理器来管理硬件的。Linux 的设备文件保存在/dev/目录中，硬盘文件是 /dev/sd[a-p]，光盘文件是/dev/hdc 等

3. ## **Linux** 不靠扩展名区分文件类型

   ### Windows 是依赖扩展名区分文件类型的，比如，“.txt”是文本文件、“.exe”是执行文件、“.ini” 是配置文件、“.mp4”是小电影等。但 Linux 不是靠扩展名区分文件类型的，而是靠权限位标识来确 定文件类型的，而且文件类型的种类也不像 Windows 下那么多，常见的文件类型只有普通文件、目录、 链接文件、块设备文件、字符设备文件等几种。Linux 的可执行文件不过就是普通文件被赋予了可执 行权限而已。

   ### 但 Linux 中的一些特殊文件还是要求写“扩展名”的，但是大家小心，并不是 Linux 一定要靠扩展名来 识别文件类型，写这些扩展名是为了帮助管理员来区分不同的文件类型。这样的文件扩展名主要有以 下几种：

   - #### 压缩包：Linux 下常见的压缩文件名有*.gz、*.bz2、*.zip、*.tar.gz、*.tar.bz2、*.tgz 等。为什么压缩包一定要写扩展名呢?其实很好理解，如果不写清楚扩展名，那么管理员不容易判断压缩包的 格式，虽然有命令可以帮助判断，但是直观一点更加方便。另外，就算没写扩展名，在 Linux 中 一样可以解压缩，不影响使用

   - #### 二进制软件包：CentOS 中所使用的二进制安装包是 RPM 包，所有的 RPM 包都用“.rpm”扩展名 结尾，目的同样是让管理员一目了然

   - #### 程序文件：Shell脚本一般用“*.sh”扩展名结尾，其他还有用“*.c”扩展名结尾的C语言文件等

   - #### 网页文件:网页文件一般使用“*.html”“*.php”等结尾，不过这是网页服务器的要求，而不是Linux的要求

4. ## **Linux**中所有的存储设备都必须在挂载之后才能使用

   ### Linux 中所有的存储设备都有自己的设备文件名，这些设备文件必须在挂载之后才能使用，包括 硬盘、U 盘和光盘。挂载其实就是给这些存储设备分配盘符，只不过 Windows 中的盘符用英文字母表 示，而 Linux 中的盘符则是一个已经建立的空目录。我们把这些空目录叫作挂载点（可以理解为 W indows 的盘符），把设备文件（如/dev/sdb）和挂载点（已经建立的空目录）连接的过程叫作挂载

5. ## 远程服务器关机及重启时的注意事项

   ### 为什么远程服务器不能关机呢?很简单，远程服务器没有放置在本地，关机后，谁可以帮你按开 机电源键启动服务器?虽然计算机技术日新月异，但是像插入电源和开机这样的工作还是需要手工进 行的。如果服务器在远程，一旦关机，就只能求助托管机房的管理人员帮你开机了。 远程服务器重启时需要注意两点

   + #### 远程服务器在重启前，要中止正在执行的服务

     #### 计算机的硬盘最怕在高速存储时断电或重启，非常容易造成硬盘损坏。所以，在重启前先中止你的服 务，甚至可以考虑暂时断开对外提供服务的网络。可能你会觉得服务器有这么娇贵吗?我的笔记本电 脑经常强行关机，也没有发现硬盘损坏啊?这是因为你的个人计算机没有很多人访问，强制断电时硬 盘并没有进行数据交换。小心驶得万年船

   + #### 重启命令的选用

     #### Linux 可以识别的重启命令有很多条，但是建议大家使用“shutdown -r now”命令重启。这条命令 在重启时会正常保存和中止服务器中正在运行的程序，是安全重启命令。而且最好在重启前执行几次 “sync”命令，这条命令是数据同步命令，可以让暂时保存在内存中的数据同步到硬盘上

6. ## 不要在服务器访问高峰运行高负载命令

   ### 在服务器访问高峰，如果使用一些对服务器压力较大的命令，则有可能会 造成服务器响应缓慢甚至死机

   ### 哪些命令是高负载命令呢?其实，如果大家使用过 Windows 操作系统，则也会留意到一些操作会 给计算机带来较大的运算压力，道理都是一样的，如复制大量的数据、压缩或者解压缩大文件、大范 围的硬盘搜索等

   ### 什么时间算作访问高峰期呢?我们一般认为 17:00—24:00 算作访问高峰期。当然，每台服务器具 体提供的服务不同，访问高峰期有时也会有所出入。比如，服务器主要是供美国人民访问的，那就要 考虑时差的问题;或者服务器提供的服务很特殊，访问高峰期可能也不同

   ### 一般我们建议在凌晨 4:00—5:00 执行这些命令。那是不是说我们需要在凌晨上班?当然不是，这 谁受得了啊?我们可以使用系统的计划任务，让操作自动在指定的时间段执行

7. ## 远程配置防火墙时不要把自己踢出服务器

   ### 在配置防火墙时，如果管 理员对防火墙不是很熟悉，则有可能把自己的正常访问数据包和有害数据包全部过滤掉，导致自己也 无法正常登录服务器，如防火墙关闭了远程连接的 SSH 服务的端口

   ### 如何避免这种尴尬的情况发生呢?最好的方法当然是在服务器本地配置防火墙，这样就算不小心 把自己的远程登录给过滤了，还可以通过本机登录来进行恢复。如果服务器已经在远程登录了，要配 置防火墙，那么最好在本地测试完善后再进行上传，这样会把发生故障的概率降到最低。虽然在本地 测试好了，但是传到远程服务器上时仍有可能发生问题。于是超哥想到一个笨办法:如果需要远程配 置防火墙，那么先写一个系统定时任务，让它每 5 分钟清空一下防火墙规则，就算写错了也还有反悔 的机会，等测试没有问题了再删除这个系统定时任务

8. ## 指定合理的密码规范并定期更新

   ### 设置密码需要遵守复杂性、易记忆性和时效性的三原则

9. ## 合理分配权限

   ### 服务器管理有一个最简单的原则:给予用户最小的权限

10. ## 定期备份重要数据和日志

    ### 备份的基本原则:不要把鸡蛋放在同一个篮子里

11. ## 了解 **Linux** 目录结构

    | 目 录 名          |                          目录的作用                          |
    | ----------------- | :----------------------------------------------------------: |
    | /bin/             | 存放系统命令的目录，普通用户和超级用户都可以执行。是/usr/bin/目录的软链接 |
    | /sbin/            | 存放系统命令的目录，只有超级用户才可以执行。是/usr/sbin/目录的软链接 |
    | /usr/bin/         |       存放系统命令的目录，普通用户和超级用户都可以执行       |
    | /usr/sbin/        |          存放系统命令的目录，只有超级用户才可以执行          |
    | /boot/            | 系统启动目录，保存与系统启动相关的文件，如内核文件和启动引导程序（grub）文件等 |
    | /dev/             |                       设备文件保存位置                       |
    | /etc/             | 配置文件保存位置。系统内所有采用默认安装方式（rpm 安装）的服务配置文件 全部保存在此目录中，如用户信息、服务的启动脚本、常用服务的配置文件等 |
    | /home/            | 普通用户的家目录。在创建用户时，每个用户要有一个默认登录和保存自己数据 的位置，就是用户的家目录，所有普通用户的宿主目录是在/home/下建立一个和 用户名相同的目录。如用户 user1 的家目录就是/home/user1/ |
    | /lib/             |        系统调用的函数库保存位置。是/usr/lib/的软链接         |
    | /lib64/           |          64 位函数库保存位置。是/usr/lib64/的软链接          |
    | /lost+found/      | 当系统意外崩溃或机器意外关机，而产生一些文件碎片放在这里。当系统启动的 过程中 fsck 工具会检查这里，并修复已经损坏的文件系统。这个目录只在每个分 区中出现，例如/lost+found 就是根分区的备份恢复目录，/boot/lost+found 就是 /boot 分区的备份恢复目录 |
    | /media/           |     挂载目录。系统建议是用来挂载媒体设备的，如软盘和光盘     |
    | /misc/            | 挂载目录。系统建议用来挂载 NFS 服务的共享目录。我们在刚刚已经解释了挂载， 童鞋们应该知道只要是一个已经建立的空目录就可以作为挂载点。那么系统虽然 准备了三个默认挂载目录/media、/mnt、/misc，但是到底在哪个目录中挂载什么 设备都可以由管理员自己决定。例如早期 Linux 的时候，默认挂载目录只有 /mnt 一个，所以养成了在/mnt 下建立不同目录挂载不同设备的习惯。如 /mnt/cdrom 挂载光盘，/mnt/usb 挂载 U 盘，这都是可以的 |
    | /mnt/             | 挂载目录。早期 Linux 中只有这一个挂载目录，并没有细分。现在系统建议这个 目录用来挂载额外的设备，如 U 盘、移动硬盘和其他操作系统的分区 |
    | /opt/             | 第三方安装的软件保存位置。这个目录是放置和安装其他软件的位置，手工安装 的源码包软件都可以安装到这个目录中。有人习惯把软件放到 /usr/local/目录中，也就是说，/usr/local/目录也可以用来安装软件 |
    | /proc/            | 虚拟文件系统。该目录中的数据并不保存在硬盘上，而是保存到内存中。主要保 存系统的内核、进程、外部设备状态和网络状态等。如/proc/cpuinfo 是保存 CPU 信息的，/proc/devices 是保存设备驱动的列表的，/proc/filesystems 是保存文件系统列表的，/proc/net 是保存网络协议信息的 |
    | /sys/             | 虚拟文件系统。和/proc/目录相似，该目录中的数据都保存在内存中，主要保存 与内核相关的信息 |
    | /root/            | root 的宿主目录。普通用户宿主目录在/home/下，root 宿主目录直接在“/”下 |
    | /run/             | 系统运行时产生的数据，如 ssid，pid 等相关数据。/var/run/是此目录的软链接 |
    | /srv/             | 服务数据目录。一些系统服务启动之后，可以在这个目录中保存所需要的数据 |
    | /tmp/             | 临时目录。系统存放临时文件的目录，在该目录下，所有用户都可以访问和写入。 我们建议此目录中不能保存重要数据，最好每次开机都把该目录清空 |
    | /usr/             | 系统软件资源目录。注意 usr 不是 user 的缩写，而是“UNIX Software Resource” 的缩写，所以不是存放用户数据的目录，而是存放系统软件资源的目录。系统中安装的软件大多数保存在这里 |
    | /usr/lib/         |                 应用程序调用的函数库保存位置                 |
    | /usr/local/       | 手工安装的软件保存位置。我们一般建议源码包软件安装在这个位置 |
    | /usr/share/       |  应用程序的资源文件保存位置，如帮助文档、说明文档和字体目录  |
    | /usr/src/         | 源码包保存位置。我们手工下载的源码包和内核源码包都可以保存到这里。有人更习惯把手工下载的源码包保存到/usr/local/src/目录中，把内核源码保存到 /usr/src/kernels/目录中 |
    | /usr/src/kernels/ |                       内核源码保存位置                       |
    | /var/             | 动态数据保存位置。主要保存缓存、日志以及软件运行所产生的文件 |
    | /var/www/html/    |               RPM 包安装的 Apache 的网页主目录               |
    | /var/lib/         | 程序运行中需要调用或改变的数据保存位置。如 MySQL 的数据库保存在 /var/lib/mysql/目录中 |
    | /var/log/         |                       系统日志保存位置                       |
    | /var/run/         | 一些服务和程序运行后，它们的 PID(进程 ID)保存位置。是/run/目录的软链接 |
    | /var/spool/       | 放置队列数据的目录。就是排队等待其他程序使用的数据，比如邮件队列和打印 队列 |
    | /var/spool/mail/  |  新收到的邮件队列保存位置。系统新收到的邮件会保存在此目录中  |
    | /var/spool/cron/  |    系统的定时任务队列保存位置。系统的计划任务会保存在这里    |